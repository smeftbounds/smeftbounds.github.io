<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Visitor Counter </title>
    <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
</head>
<body>
    <main>
        Visitor Counter
    </main>
    <footer>
        <div class="contact-section2">
            <p id="visitorCount">Loading...</p>
        </div>
    </footer>
    <script>
        // Your Firebase configuration
        const firebaseConfig = {
	  apiKey: "AIzaSyAS_bJ5i3G1cjHe5OQUQMKnQeyNAQ6hbz8",
	  authDomain: "countsb-bb4de.firebaseapp.com",
	  projectId: "countsb-bb4de",
	  storageBucket: "countsb-bb4de.appspot.com",
	  messagingSenderId: "1035434372394",
	  appId: "1:1035434372394:web:d628d0614a208fd50a0253"
	};

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function updateVisitorCount() {
            const visitorCountRef = db.collection('visitorCounts').doc('count');

            try {
                const doc = await visitorCountRef.get();
                if (doc.exists) {
                    const data = doc.data();
                    const newCount = data.count + 1;
                    await visitorCountRef.update({ count: newCount });
                    document.getElementById('visitorCount').innerText = `Visitor Count: ${newCount}`;
                } else {
                    await visitorCountRef.set({ count: 1 });
                    document.getElementById('visitorCount').innerText = `Visitor Count: 1`;
                }
            } catch (error) {
                console.error("Error updating visitor count: ", error);
            }
        }

        updateVisitorCount();
    </script>
</body>
</html>
